{% extends "base.html" %}

{% block head_links %}
    <link rel="stylesheet" href="{{ url_for('crud.static', filename='css/edit-discipline.css') }}">
{% endblock %}

{% block mainContent %}
<!-- Display Flash Messages -->
<div class="dashboard" style="display: flex; flex-direction: column; gap: 20px;">
    <div id="flash-messages" class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message | safe}}
            </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
    <div class="section" id="search-discipline-section">
        <h2>Editar Disciplinas</h2>
        <div>
            <!-- Dropdown menus -->
            <select id="discipline-category" style="width: 10%;">
                {% for area in areas %}
                    <option value="{{ area.id }}">{{ area.number }}</option>
                {% endfor %}
            </select>

            <select id="discipline-list" style="width: 45%;">
                {% for disc in initial_disciplines %}
                    <option value="{{ disc.id }}">{{ disc.code }} - {{ disc.name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="section" id="discipline-summary-section" style="display: none;">
        <h2>Informações da Disciplina</h2>
        <div id="discipline-summary">
            <table id="discipline-summary-table" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th>Cod</th>
                        <th>Nome</th>
                        <th>Abreviação</th>
                        <th>C.H.</th>
                        <th>Sala</th>
                        <th>Teórica</th>
                        <th>Ext.</th>
                        <th>Ação</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="section" id="discipline-info-section" style="display: none;">
        <h2>Módulos</h2>
        <div id="discipline-info">
            <table id="modules-table" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th>Cod</th>
                        <th>Professor 1</th>
                        <th>Professor 2</th>
                        <th>Professor 3</th>
                        <th>Ação</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be populated here -->
                </tbody>
            </table>
        </div>
        <button id="apply-changes" style="margin-top: 20px;">Aplicar Alterações</button>
    </div>
</div>

<script src="{{ url_for('crud.static', filename='scripts/disciplines.js') }}"></script>
{% endblock %}
